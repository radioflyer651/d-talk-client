<div class="inner-voice-params">
    <label>
        Inner-Voice Chat Messages To Execute Before Response
    </label>


    <div class="control-container">
        <div class="upper-row">
            <p-floatlabel>
                <p-select [options]="messageTypeOptions" appendTo="body" [(ngModel)]="params.callType"></p-select>
                <label for="message-type">label</label>
            </p-floatlabel>

            <p-button label="New Message" (click)="addMessage()"></p-button>
        </div>

        <div class="checkbox-container">
            <p-checkbox [binary]="true" [(ngModel)]="params.considerLastMessageInResponse"></p-checkbox>
            <label>Consider Last Chat Message In Response</label>
        </div>

        <div class="checkbox-container">
            <p-checkbox [binary]="true" [(ngModel)]="params.responseToLastInnerVoiceMessage"></p-checkbox>
            <label>Respond To Last Inner Voice Message</label>
        </div>

        <div class="checkbox-container">
            <p-checkbox [binary]="true" [(ngModel)]="params.addDummyAiMessageBeforeInnerDialog"></p-checkbox>
            <label>Add Dummy AI Message Before Inner Voice</label>
        </div>

        <div class="checkbox-container">
            <p-checkbox [binary]="true" [(ngModel)]="params.debug"></p-checkbox>
            <label>Add Console Logs For AI Responses</label>
        </div>

        <div class="checkbox-container">
            <p-checkbox [binary]="true" [(ngModel)]="params.excludeProjectMessages"></p-checkbox>
            <label>Exclude Project Messages</label>
        </div>

        <div class="checkbox-container">
            <p-checkbox [binary]="true" [(ngModel)]="params.excludeChatRoomMessages"></p-checkbox>
            <label>Exclude Chat Room Messages</label>
        </div>

        <div class="checkbox-container">
            <p-checkbox [binary]="true" [(ngModel)]="params.excludeJobMessages"></p-checkbox>
            <label>Exclude Job Messages</label>
        </div>

        <div class="checkbox-container">
            <p-checkbox [binary]="true" [(ngModel)]="params.excludeAgentIdentityMessages"></p-checkbox>
            <label>Exclude Agent Identity Messages</label>
        </div>

        <div class="checkbox-container">
            <p-checkbox [binary]="true" [(ngModel)]="params.excludeAgentInstructionMessages"></p-checkbox>
            <label>Exclude Agent Instruction Messages</label>
        </div>

        <div class="checkbox-container">
            <p-checkbox [binary]="true" [(ngModel)]="params.excludePluginMessages"></p-checkbox>
            <label>Exclude Plugin Messages</label>
        </div>
    </div>

    <div>
        <div *ngFor="let message of params.messageList; let index = index" class="message-item">
            <div class="message-controls">
                <p-button [rounded]="true" size="small" severity="danger" icon="fa-regular fa-x"
                    (click)="deleteMessage(index)"></p-button>
                <p-button [rounded]="true" (click)="editMessage(index)" size="small" severity="info"
                    icon="fa-regular fa-edit"></p-button>

                <div class="control-spacer-half"></div>

                <p-button *ngIf="index>0" [rounded]="true" icon="fa-regular fa-arrow-up" (click)="moveMessageUp(index)"
                    size="small" severity="help"></p-button>

                <div *ngIf="index===params.messageList.length-1 || index===0" class="control-spacer"></div>

                <p-button *ngIf="index<params.messageList.length-1" [rounded]="true" icon="fa-regular fa-arrow-down"
                    (click)="moveMessageDown(index)" size="small" severity="help"></p-button>

            </div>

            <div class="message-text">
                {{message}}
            </div>
        </div>
    </div>
</div>

<p-dialog [(visible)]="isEditDialogVisible" appendTo="body" [style]="{minWidth: '30vw', minHeight: '30vh'}"
    header="Instructions">
    <textarea pTextarea [(ngModel)]="editDialogMessageValue" [style]="{width: '100%', height: '100%'}"></textarea>

    <ng-template #footer>
        <div class="footer-button-controls">
            <p-button label="Cancel" [disabled]="isNewMessage" (click)="closeDialog(true)"></p-button>
            <p-button label="OK" (click)="closeDialog(false)"></p-button>
        </div>
    </ng-template>
</p-dialog>

<p-dialog [(visible)]="showHelpMessage" appendTo="body" [closable]="false">
    <div class="help-text">
        {{helpText}}
    </div>

    <ng-template #footer>
        <div class="footer-button-controls">
            <p-button label="OK" (click)="closeHelpDialog()"></p-button>
        </div>
    </ng-template>
</p-dialog>